from djoser.serializers import UserCreateSerializer
from rest_framework import serializers

from common.serialization.serializers import LazyRefSerializer
from users.models import User


class UserDefaultSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ["id", "email", "profile"]


class UserListSerializer(serializers.HyperlinkedModelSerializer):
    profile = LazyRefSerializer(
        "employees.serializers.EmployeeHyperlinkedDetailSerializer"
    )

    class Meta:
        model = User
        fields = ["url", "email", "profile"]


class UserRetrieveSerializer(UserDefaultSerializer):
    profile = LazyRefSerializer("employees.serializers.EmployeeRetrieveSerializer")


class CustomUserCreateSerializer(UserCreateSerializer):
    class Meta:
        model = User
        fields = ["email", "password", "profile"]


class UserSelfDetailSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ["email", "profile"]
        read_only_fields = ["email"]
