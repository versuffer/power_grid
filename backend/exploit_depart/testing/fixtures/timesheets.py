from datetime import date, datetime

import pytest

from common.services.utils import generate_random_string
from timesheets.models import TimeSheet


@pytest.fixture
def timesheet(employee):
    timesheet_obj = TimeSheet(
        timesheet_name=generate_random_string(str_len=50),
        period_start=date(year=datetime.now().year, month=1, day=1),
        period_end=date(year=datetime.now().year, month=1, day=15),
    )
    timesheet_obj.save()
    timesheet_obj.employees.add(employee)
    timesheet_obj.save()
    return timesheet_obj
