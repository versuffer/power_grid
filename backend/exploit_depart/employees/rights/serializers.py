from rest_framework import serializers

from common.serialization.serializers import LazyRefSerializer

from .models import Right
from .services.validation import RightValidator


class RightHyperlinkedDetailSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Right
        exclude = ["description"]


class RightDetailSerializer(serializers.ModelSerializer):
    owners = LazyRefSerializer(
        "employees.serializers.EmployeeHyperlinkedDetailSerializer",
        many=True,
        read_only=True,
    )

    class Meta:
        model = Right
        fields = "__all__"

    def validate(self, data):
        validator = RightValidator(self, data)
        return validator.right_object_validation()
