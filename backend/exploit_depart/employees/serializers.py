from rest_framework import serializers

from common.serialization.serializers import LazyRefSerializer
from employees.models import Employee


class EmployeeDefaultSerializer(serializers.ModelSerializer):
    class Meta:
        model = Employee
        fields = "__all__"


class EmployeeHyperlinkedDetailSerializer(serializers.HyperlinkedModelSerializer):
    credentials = serializers.CharField()

    class Meta:
        model = Employee
        fields = ["url", "credentials", "individual_number", "department"]


class EmployeeRightsTableSerializer(serializers.ModelSerializer):
    rights = LazyRefSerializer(
        "employees.rights.serializers.RightHyperlinkedDetailSerializer", many=True
    )

    class Meta:
        model = Employee
        fields = [
            "first_name",
            "last_name",
            "middle_name",
            "department",
            "position",
            "grade",
            "elec_safety_grade",
            "voltage_level_grade",
            "rights",
        ]


class EmployeeRetrieveSerializer(EmployeeDefaultSerializer):
    supervisors = LazyRefSerializer("users.serializers.UserListSerializer", many=True)
    rights = LazyRefSerializer(
        "employees.rights.serializers.RightHyperlinkedDetailSerializer", many=True
    )
