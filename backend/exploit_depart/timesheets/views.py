from drf_spectacular.utils import extend_schema
from rest_framework.viewsets import ModelViewSet

from common.views.mixins import MultiSerializerMixin

from .models import TimeSheet
from .serializers import (
    TimeSheetCreateSerializer,
    TimeSheetDefaultSerializer,
    TimeSheetListSerializer,
    TimeSheetRetrieveSerializer,
    TimeSheetUpdateSerializer,
)


@extend_schema(tags=["Timesheets"])
class TimeSheetViewSet(MultiSerializerMixin, ModelViewSet):
    queryset = TimeSheet.objects.prefetch_related("employees").all()
    serializer_class = TimeSheetDefaultSerializer
    serializer_action_classes = {
        "list": TimeSheetListSerializer,
        "retrieve": TimeSheetRetrieveSerializer,
        "create": TimeSheetCreateSerializer,
        "update": TimeSheetUpdateSerializer,
        "partial_update": TimeSheetUpdateSerializer,
    }
