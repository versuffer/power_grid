from drf_spectacular.utils import extend_schema
from rest_framework.mixins import (
    RetrieveModelMixin,
    UpdateModelMixin,
)
from rest_framework.viewsets import GenericViewSet, ModelViewSet

from .models import TimeSheet, WorkDay
from .mixins import MultiSerializerViewSetMixin
from .serializers import (
    TimeSheetDefaultSerializer,
    TimeSheetCreateSerializer,
    TimeSheetUpdateSerializer,
    TimeSheetListSerializer,
    TimeSheetRetrieveSerializer,
    WorkDayDetailSerializer,
)


@extend_schema(tags=["Workdays"])
class RetrieveUpdateWorkDayViewSet(
    GenericViewSet, RetrieveModelMixin, UpdateModelMixin
):
    queryset = WorkDay.objects.all()
    serializer_class = WorkDayDetailSerializer


@extend_schema(tags=["Timesheets"])
class TimeSheetViewSet(MultiSerializerViewSetMixin, ModelViewSet):
    queryset = TimeSheet.objects.all()
    serializer_class = TimeSheetDefaultSerializer
    serializer_action_classes = {
        "list": TimeSheetListSerializer,
        "retrieve": TimeSheetRetrieveSerializer,
        "create": TimeSheetCreateSerializer,
        "update": TimeSheetUpdateSerializer,
        "partial_update": TimeSheetUpdateSerializer,
    }
