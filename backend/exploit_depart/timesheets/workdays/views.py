from drf_spectacular.utils import extend_schema
from rest_framework.mixins import RetrieveModelMixin, UpdateModelMixin
from rest_framework.viewsets import GenericViewSet

from common.views.mixins import MultipleUpdateModelMixin

from .models import WorkDay
from .serializers import WorkDayDetailSerializer, WorkDayMultipleUpdateSerializer


@extend_schema(tags=["Workdays"])
class RetrieveUpdateWorkDayViewSet(
    MultipleUpdateModelMixin,
    GenericViewSet,
    RetrieveModelMixin,
    UpdateModelMixin,
):
    queryset = WorkDay.objects.select_related("employee").all()
    serializer_class = WorkDayDetailSerializer
    serializer_action_classes = {
        "multiple_update": WorkDayMultipleUpdateSerializer,
    }
