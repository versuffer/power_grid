from employees.models import Employee
from rest_framework import serializers
from users.models import User


class EmployeeDefaultSerializer(serializers.ModelSerializer):
    class Meta:
        model = Employee
        fields = "__all__"


class EmployeeHyperlinkedDetailSerializer(serializers.HyperlinkedModelSerializer):
    credentials = serializers.CharField()

    class Meta:
        model = Employee
        fields = ["url", "credentials", "individual_number", "department"]


class SupervisorDetailSerializer(serializers.ModelSerializer):
    profile = EmployeeHyperlinkedDetailSerializer()

    class Meta:
        model = User
        fields = ["id", "email", "profile"]
        read_only_fields = ["profile"]


class EmployeeRetrieveSerializer(EmployeeDefaultSerializer):
    supervisors = SupervisorDetailSerializer(many=True)


class UserRetrieveSerializer(serializers.ModelSerializer):
    profile = EmployeeRetrieveSerializer()

    class Meta:
        model = User
        fields = ["id", "email", "profile"]
        read_only_fields = ["profile"]
